{"name":"Goimgshare","tagline":"Secure image and file share website with custom permissions and thumbnail generation","body":"[![Build Status](https://travis-ci.org/MindFlavor/goimgshare.svg?branch=master)](https://travis-ci.org/MindFlavor/goimgshare)\r\n\r\n# GO Image and video share\r\n\r\nGO Image and video share is a program that creates a file sharing website useful to share images and other files. The main features are:\r\n- Support for Facebook authentication\r\n- Support for Google authentication\r\n- Support for GitHub authentication. \r\n- Automatic image resize for faster thumbnails (with cache)\r\n\r\n## How install\r\n\r\n#### Check GO installation\r\nEnsure to have GO installed (tested with 1.5). If not sure issue: \r\n```\r\ngo version\r\n``` \r\nfrom command line. Make sure to have a valid ```$GOPATH``` environment variable. \r\n#### Get the source code\r\n```\r\ngo get -u github.com/mindflavor/goimgshare\r\n```\r\nThis will get the source code. You can use the same command later to update the source code.\r\n\r\n#### Copy sample configuration files\r\nThis step is optional, you can edit the original files without copying them. In that case, however, you will have to stash your changes before updating the source code.\r\n``` \r\ncp $GOPATH/src/github.com/mindflavor/goimgshare/config.json /etc/goimgshare/config.json\r\ncp $GOPATH/src/github.com/mindflavor/goimgshare/shared_folders.json /etc/goimgshare/shared_folders.json\r\n```\r\nOf course replace ```/etc/goimgshare``` with your path. Windows users should use a Windows path of your choosing.\r\n\r\n#### Edit the configuration files\r\nThere are two configuration files, one for the general configuration and another for the shared folders. \r\n##### Main configuration file\r\n```json\r\n{\r\n  \"Port\":8080,\r\n  \"CacheInternalHTTPFiles\":false,\r\n  \"LogInternalHTTPFilesAccess\":true,\r\n  \"InternalHTTPFilesPath\": \"D:\\\\GIT\\\\Go\\\\src\\\\github.com\\\\mindflavor\\\\goimgshare\",\r\n  \"SharedFoldersConfigurationFile\":\"D:\\\\temp\\\\shared_folders.json\",\r\n  \"ThumbnailCacheFolder\":\"D:\\\\temp\\\\thumbs\",\r\n  \"SmallThumbnailSize\":500,\r\n  \"AverageThumbnailSize\":1000,\r\n  \"Google\":{\r\n    \"ClientID\":\"247709547460-aovc4l7ghgs2senq0cr2ivphiu12kssv.apps.googleusercontent.com\",\r\n    \"Secret\":\"h7tgEmIMHf6Q-xvQQcP9glmQ\",\r\n    \"ReturnURL\":\"http://localhost:8080/auth/google/callback\"},\r\n  \"Facebook\":null,\r\n  \"Github\":null\r\n}\r\n```\r\nThe attributes are:\r\n\r\nAttribute | Explanation\r\n ---- | ----\r\n ```Port``` | The webserver port. If the port is already in use the program will panic. \r\n ```CacheInternalHTTPFiles```  |If ```true``` the webserver will cache in memory the static HTML an JS files. ```false``` is useful if you are editing the files because you don't need to restart the program to see the changes. \r\n```LogInternalHTTPFilesAccess``` | If ```true``` the console will log the access to static HTML and JS files.\r\n```InternalHTTPFilesPath``` | This folder must point to the ```goimgshare``` root folder. It will be ```$GOPATH/src/github.com/mindflavor/goimgshare``` unless moved.\r\n```SharedFoldersConfigurationFile```|The shared folders configuration file. It will be read at startup so if you change it you will need to restart the program.\r\n```ThumbnailCacheFolder```|Thumbnail cache folder. It must be a valid path.\r\n```SmallThumbnailSize```|Thumbnail size in pixels. Smaller images are faster but of course will be grainy on high-resolution displays. Note that you need to clean the ```ThumbnailCacheFolder``` manually if you change this.\r\n```AverageThumbnailSize```|Unused at the moment.\r\n```Google::ClientID```|Your Google client ID. \r\n```Google::Secret```|Your Google client secret. \r\n```Google::ReturnURL```|Google authentication return URL. Do not change the suffix ```/auth/google/callback```.\r\n```Facebook::ClientID```|Your Facebook client ID. \r\n```Facebook::Secret```|Your Facebook client secret. \r\n```Facebook::ReturnURL```|Facebook authentication return URL. Do not change the suffix ```/auth/google/callback```.\r\n```Github::ClientID```|Your Github client ID. \r\n```Github::Secret```|Your Github client secret. \r\n```Github::ReturnURL```|Github authentication return URL. Do not change the suffix ```/auth/google/callback```.\r\n\r\nAs you can see, the authentication providers are optional. Just make sure to specify at least one or you won't be able to log in! :wink:.\r\n\r\n##### Shared folders configuration file\r\nThis is a sample shared folders configuration file:\r\n```json\r\n[\r\n  {\r\n    \"ID\": \"001\",\r\n    \"Name\": \"temp on D\",\r\n    \"Path\": \"D:\\\\temp on D\",\r\n    \"AuthorizedMails\": {\r\n      \"francesco.cogno@gmail.com\": true,\r\n      \"valentina.test@gmail.com\": true\r\n    }\r\n  },\r\n  {\r\n    \"ID\": \"002\",\r\n    \"Name\": \"temp on C\",\r\n    \"Path\": \"C:\\\\temp\",\r\n    \"AuthorizedMails\": {\r\n      \"francesco.cogno@gmail.com\": true,\r\n      \"prova@test.com\": true\r\n    }\r\n  }\r\n]\r\n\r\n```\r\nThe file is an array of shared folders. The first folder can be viewed - along with its contenints - by      francesco.cogno@gmail.com and valentina.test@gmail.com. The second folder is also accessible by francesco.cogno@gmail.com but not by valentina.test@gmail.com. It's the only folder accessible by prova@test.com.\r\n\r\nThe shared folder fields are:\r\n\r\nAttribute | Explanation\r\n ---- | ----\r\nID | An arbitrary ID. It can be anything you want as long as it is unique in the array.\r\nName | The user-facing folder name. It does not have to be unique (but it will be confusing if it is not).\r\n Path | The path of the folder. The folder should be accessible and the files within should be readable by the program's account.\r\nAuthorizedMails | Is a map of emails and a ```boolean``` indicating if the mail has access. Any email not specified here is not allowed to access the folder (and will not see it either in the list). The same happens if you specify false as mail attribute (useful if you want to temporarily revoke user access).\r\n\r\n#### Build and install the program\r\n```\r\ngo install github.com/mindflavor/goimgshare\r\n```\r\nThis will place the binary in your ```$GOPATH\\bin``` folder.\r\n#### Start the program specifying the main configuration file\r\n```\r\n$GOPATH/bin/goimgshare /etc/goimgshare/config.json\r\n```\r\n\r\nIf everything goes as planned (ie there are no bugs and the configuration files are correct) you should see something like this:\r\n\r\n![](http://i.imgur.com/YSssxWY.jpg)\r\n\r\nAnd you will be able to browse the http://localhost:<port> address. Since you are not authenticated you will see the authentication page (the number of authentication providers is dependent on the configuration - check the [authentication_providers] section for details):\r\n\r\n![](http://i.imgur.com/E2nKiGH.png)\r\n\r\nHere we have Google and Facebook as authentication providers. Note that the links are dynamic and dependent on the configuration (so you won't see a button if you have not configured the relevant provider). \r\n\r\n### Acknowledgements \r\nThis program uses these libraries:\r\n* [https://github.com/stretchr/gomniauth](https://github.com/stretchr/gomniauth)\r\n* [https://github.com/stretchr/signature](https://github.com/stretchr/signature)\r\n* [https://github.com/gorilla/mux](https://github.com/gorilla/mux)\r\n* [https://github.com/nfnt/resize](https://github.com/nfnt/resize)\r\n* [AngularJS](https://angularjs.org/)\r\n* [Bootstrap](http://getbootstrap.com/)\r\n\r\n\r\n----------\r\n\r\n**Happy coding**\r\n\r\n[Francesco Cogno](francesco.cogno@outlook.com)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}